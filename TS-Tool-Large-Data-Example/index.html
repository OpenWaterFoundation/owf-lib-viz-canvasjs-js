<!DOCTYPE html>
<html>
<head>
    <title>CanvasJS TS Tool Large Data Example</title>
    <!-- Javascript -->
    <script type="text/javascript" src="javascript/canvasjs.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>
</head>

<body>
    <div id="chartContainer"></div>
    <script>
    var dataPoints = [];
 
    function getDataPointsFromCSV(csv,index) {
        var dataPoints = csvLines = points = [];
        csvLines = csv.split(/[\r?\n|\r|\n]+/);
        for (var i = 0; i < csvLines.length; i++)
        {
            if(csvLines[i].length > 0) 
            {
                points = csvLines[i].split(",");
                if(i != 0 && points[index] != "")
                {
                    dataPoints.push({ x: new Date(points[0].substring(0,4),points[0].substring(5,7),points[0].substring(8,10)), y: parseFloat(points[index])});
                }
                else
                {
                    dataPoints.push({ x: new Date(points[0].substring(0,4),points[0].substring(5,7),points[0].substring(8,10)), y: null});
                }
            }
        }
        return dataPoints;
    }
       
    $.get("data-files/large-precip-data.csv", function(data) {
        var chart = new CanvasJS.Chart("chartContainer", {
            title: {
              text: "Precipitation",
            },
            toolTip: {  // Allow tooltip to show all series data points when hovering over data
                shared: true
            },
            axisX: {
              title: 'Date',
              labelAngle: -50,   // label angle of each x-axis tick mark,
              gridThickness: 2  // show grid on x-axis
            },
            axisY: {
              title: 'inches',
            },
            toolTip: {
                shared: true
            },
            legend: {
             horizontalAlign: "center", // "center" , "right"
             verticalAlign: "bottom",  // "top" , "bottom"
             fontSize: 15
           },
            zoomEnabled: true,
            data: [
            {
                type: "line",
                dataPoints: getDataPointsFromCSV(data,1),
                legendText: '53005',
                showInLegend: true,
            },
            {
                type: "line",
                dataPoints: getDataPointsFromCSV(data,2),
                legendText: '58839',
                showInLegend: true,
            },
            {
                type: "line",
                dataPoints: getDataPointsFromCSV(data,3),
                legendText: '052759',
                showInLegend: true,
            }
            ]
        });
        
        chart.render();
     
    });
    </script>
</body>
</html>